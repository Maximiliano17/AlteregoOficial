<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alterego Oficial</title>
    <link rel="stylesheet" href="estilosgenerales.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Orbitron:wght@400;900&family=Playfair+Display:ital,wght@1,500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
</head>

<body>
    <div class="containerGeneral">
        <section class="navContainer">
            <h5 class="titulo">ALTEREGO OFICIAL</h5>
            <nav class="nav">
                <a class="item" href="#estampa">Personalizados</a>
                <a class="itemGeneral">Catalogo</a>
                <a class="itemGeneral">Mayorista</a>
            </nav>
            <div class="homeCotainer">
                <h1 class="animate__animated animate__fadeInTopLeft">Alterego</h1>
                <img src="assets/modeloPrincipal.png" title="modelo" class="animate__animated animate__slideInUp" />
                <h1 class="animate__animated animate__fadeInTopRight">Oficial</h1>
            </div>
            <article class="itemPrincipal animate__animated animate__fadeInBottomRight">
                <img src="assets/remeraPrincipal2.png" alt="Remera" title="Remera Alterego" />
                <a href="vistas/modelo.html" class="btnModelo">
                    Ver Modelo
                    <img src="assets/arrow.png" alt="Arrow" title="Arrow" />
                </a>
            </article>
            <article class="textoItem animate__animated animate__fadeInBottomLeft">
                <p>
                    <strong>Alter Ego</strong> es una marca de <strong>ropa personalizada</strong> en <strong>Buenos
                        Aires</strong>.
                    Creamos prendas y productos <em>a medida</em> con <strong>estampado DTF</strong>.
                </p>
            </article>
        </section>

        <section id="estampa" class="iaGeneratorSection">
            <div class="iaMainGrid">
                <div class="iaCard iaInputs animate__animated animate__fadeInLeft">
                    <h2 class="iaTitle">GENERAR ESTAMPADO</h2>
                    <div class="uploadBox" id="dropZone">
                        <input type="file" id="fileInput" hidden accept="image/*">
                        <div class="uploadContent" onclick="document.getElementById('fileInput').click()">
                            <img src="assets/subir.png" id="previewIcon"
                                style="font-size: 3rem; width: 100px; object-fit: cover;" />
                            <p id="uploadText">SUBE TU IMAGEN</p>
                        </div>
                    </div>

                    <div class="inputField">
                        <label>TEXTO PERSONALIZADO</label>
                        <textarea id="promptIA" style="resize: none;"
                            placeholder="Escribe el texto que quieres ver en la remera..."></textarea>
                    </div>

                    <div class="inputField">
                        <label>POSICIÓN DEL TEXTO</label>
                        <select id="posicionTexto">
                            <option value="abajo">Debajo de la imagen</option>
                            <option value="arriba">Arriba de la imagen</option>
                            <option value="logo-izq">Logo Izquierda (Pecho)</option>
                            <option value="logo-der">Logo Derecha (Pecho)</option>
                            <option value="oculto">Sin texto</option>
                        </select>
                    </div>

                    <div class="inputField">
                        <label>COLOR DE PRENDA</label>
                        <select id="colorRemera">
                            <option value="negro">Negro</option>
                            <option value="blanco">Blanco</option>
                            <option value="rojo">Rojo</option>
                            <option value="azul">Azul Marino</option>
                            <option value="celeste">Celeste</option>
                            <option value="beige">Beige</option>
                        </select>
                    </div>

                    <div class="inputField">
                        <label>UBICACIÓN</label>
                        <select id="ubicacion">
                            <option value="FRENTE">FRENTE (Pecho)</option>
                            <option value="ESPALDA">ESPALDA (Full)</option>
                            <option value="LOGO_IZQ">LOGO IZQUIERDA</option>
                            <option value="LOGO_DER">LOGO DERECHA</option>
                        </select>
                    </div>

                    <button class="btnPrincipalIA" onclick="generarDiseño()">
                        VER RESULTADO EN REMERA <span>→</span>
                    </button>
                </div>

                <div class="iaVisuals">
                    <div class="mockupContainer" id="mockupContainer">
                        <img src="assets/remeraFrente.png" id="remeraBase" class="remeraBaseImg">

                        <div id="contEstampado" class="areaEstampado">
                            <img id="estampadoIA" src="" class="hidden">
                        </div>

                        <div id="contTexto" class="areaEstampado">
                            <div id="textoEnRemera" class="textoSuperpuesto"></div>
                        </div>

                        <div id="loaderGenerando" class="loader-overlay hidden">
                            <div class="spinner"></div>
                            <p>PROCESANDO...</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <div class="containerCatalogo">
            <article class="articleCatalogo" data-target="modalFire">
                <img src="catalogos/revista.png" alt="FIRE">
            </article>
            <article class="articleCatalogo">
                <img src="catalogos/revista.png" alt="FIRE">
            </article>
            <article class="articleCatalogo">
                <img src="catalogos/revista.png" alt="FIRE">
            </article>
            <article class="articleCatalogo">
                <img src="catalogos/revista.png" alt="FIRE">
            </article>
            <!--
            <article class="articleCatalogo" data-target="modalIce">
                <img src="catalogos/revistaICE.png" alt="ICE">
                <h2>Colección Ice</h2>
            </article>
            -->
        </div>
        <div id="modalFire" class="modal-overlay">
            <div class="modal-content">
                <img src="catalogos/revista.png"/>
            </div>
        </div>

        <div id="modalIce" class="modal-overlay">
            <div class="modal-content">
                <span class="close-btn">&times;</span>
                <h2>Detalles Colección Ice</h2>
                <p>Contenido específico de la revista Ice...</p>
            </div>
        </div>
    </div>

    <script>
        function generarDiseño() {
            const file = document.getElementById('fileInput').files[0];
            const promptTexto = document.getElementById('promptIA').value;
            const lado = document.getElementById('ubicacion').value;
            const posicionT = document.getElementById('posicionTexto').value;

            const remeraBase = document.getElementById('remeraBase');
            const estampadoImg = document.getElementById('estampadoIA');
            const loader = document.getElementById('loaderGenerando');

            const contEstampado = document.getElementById('contEstampado');
            const contTexto = document.getElementById('contTexto');
            const textoRemera = document.getElementById('textoEnRemera');

            if (!file) {
                alert("Primero carga una imagen");
                return;
            }

            loader.classList.remove('hidden');

            remeraBase.src = (lado === "ESPALDA") ? "assets/remeraEspalda.png" : "assets/remeraFrente.png";

            const clasePosImagen = "pos-" + lado.toLowerCase().replace('_', '-');
            contEstampado.className = "areaEstampado " + clasePosImagen;


            contTexto.className = "areaEstampado";
            textoRemera.className = "textoSuperpuesto";

            if (posicionT === "arriba" || posicionT === "abajo") {

                contEstampado.appendChild(textoRemera);
                textoRemera.classList.add(`texto-${posicionT}`);
            } else if (posicionT !== "oculto") {
                contTexto.appendChild(textoRemera);
                contTexto.classList.add(`pos-${posicionT}`);
            }

            const reader = new FileReader();
            reader.onload = function (e) {
                setTimeout(() => {
                    estampadoImg.src = e.target.result;
                    estampadoImg.classList.remove('hidden');
                    textoRemera.innerText = (posicionT === "oculto") ? "" : promptTexto;
                    loader.classList.add('hidden');
                }, 600);
            };
            reader.readAsDataURL(file);
        }
        document.getElementById('fileInput').onchange = function (e) {
            if (e.target.files[0]) {
                document.getElementById('uploadText').innerHTML = "IMAGEN LISTA";
            }
        };

        const articulos = document.querySelectorAll('.articleCatalogo');
        const botonesCerrar = document.querySelectorAll('.close-btn');
        const overlays = document.querySelectorAll('.modal-overlay');

        articulos.forEach(articulo => {
            articulo.addEventListener('click', () => {
                const modalId = articulo.getAttribute('data-target');
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.add('active');
                    document.body.style.overflow = 'hidden';
                }
            });
        });

        botonesCerrar.forEach(boton => {
            boton.addEventListener('click', () => {
                const modal = boton.closest('.modal-overlay');
                modal.classList.remove('active');
                document.body.style.overflow = 'auto';
            });
        });

        window.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal-overlay')) {
                e.target.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        });

        // 1. Definimos las imágenes de cada catálogo
        const catalogosData = {
            modalFire: [
                "catalogos/FIREPortada.png",
                "img/fire_p2.jpg",
                "img/fire_p3.jpg",
                "img/fire_p4.jpg",
                "img/fire_p5.jpg",
                "img/fire_p6.jpg"
            ]
            // Puedes agregar modalIce, modalEarth, etc.
        };

        // 2. Estado actual: qué página estamos viendo en cada modal
        let indicesPagina = {
            modalFire: 0 // Indica el índice de la imagen de la izquierda
        };

        // 3. Función para actualizar las imágenes en el DOM
        function actualizarHojas(modalId) {
            const paginas = catalogosData[modalId];
            const indice = indicesPagina[modalId];

            const hojaIzquierda = document.querySelector(`#${modalId} #hojaIzquierda`);
            const hojaDerecha = document.querySelector(`#${modalId} #hojaDerecha`);

            // Imagen izquierda
            hojaIzquierda.style.backgroundImage = `url('${paginas[indice]}')`;

            // Imagen derecha (si existe, si no, poner blanco o la misma)
            if (paginas[indice + 1]) {
                hojaDerecha.style.backgroundImage = `url('${paginas[indice + 1]}')`;
            } else {
                hojaDerecha.style.backgroundImage = "none";
                hojaDerecha.style.backgroundColor = "white";
            }
        }

        // 4. Eventos de clic para pasar páginas
        document.getElementById('hojaDerecha').addEventListener('click', () => {
            const modalId = "modalFire"; // O detectarlo dinámicamente
            if (indicesPagina[modalId] + 2 < catalogosData[modalId].length) {
                indicesPagina[modalId] += 2;
                actualizarHojas(modalId);
            }
        });

        document.getElementById('hojaIzquierda').addEventListener('click', () => {
            const modalId = "modalFire";
            if (indicesPagina[modalId] - 2 >= 0) {
                indicesPagina[modalId] -= 2;
                actualizarHojas(modalId);
            }
        });

        actualizarHojas("modalFire");

        function cerrarModal(id) {
            document.getElementById(id).classList.remove('active');
        }

        function pasarPagina(modalId, direccion) {
            const paginas = catalogosData[modalId];
            const actual = indicesPagina[modalId];
            const contenedor = document.querySelector(`#${modalId} .modal-content`);

            if (direccion === 1 && actual + 2 >= paginas.length) return;
            if (direccion === -1 && actual - 2 < 0) return;

            const volante = document.createElement('div');
            volante.className = 'hoja-volante';

            if (direccion === 1) {
                volante.style.right = "0";
                volante.style.backgroundImage = `url('${paginas[actual + 1]}')`;
                volante.style.transformOrigin = "left";
                contenedor.appendChild(volante);

                setTimeout(() => {
                    volante.classList.add('flip-to-left');
                }, 10);
            } else {
                volante.style.left = "0";
                volante.style.backgroundImage = `url('${paginas[actual]}')`;
                volante.style.transformOrigin = "right";
                contenedor.appendChild(volante);

                setTimeout(() => {
                    volante.classList.add('flip-to-right');
                }, 10);
            }

            setTimeout(() => {
                indicesPagina[modalId] += (direccion * 2);
                actualizarHojas(modalId);
                volante.remove();
            }, 600);
        }

        document.getElementById('hojaDerecha').onclick = () => pasarPagina('modalFire', 1);
        document.getElementById('hojaIzquierda').onclick = () => pasarPagina('modalFire', -1);
    </script>
</body>

</html>